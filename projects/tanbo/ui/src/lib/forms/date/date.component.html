<ui-dropdown class="ui-date-dropdown" [open]="open" [autoDisplay]="false" (uiEscape)="onEscape()">
  <ui-dropdown-input
          (click)="toggle()"
          (uiClean)="reset()"
          [placeholder]="placeholder"
          [disabled]="disabled"
          [readonly]="readonly"
          [name]="name"
          [arrowIconClassName]="arrowIconClassName"
          [value]="displayValue"
          [forId]="forId"
          [size]="size"></ui-dropdown-input>
  <ui-dropdown-menu class="ui-date-dropdown-menu" [position]="position">
    <div class="ui-date-container">
      <table class="ui-date-table">
        <tbody class="ui-date-head">
        <tr>
          <td class="ui-text-right">
            <button type="button"
                    [disabled]="showType === 'year' ? !canToPreviousYears : !canToPreviousYear"
                    (click)="showType === 'year' ? updateYears(years[0] - 32) : toPreviousYear()">&laquo;</button>
            <button type="button" (click)="toPrevMonth()">&lsaquo;</button>
          </td>
          <td class="ui-text-center">
            <button type="button"
                    (click)="changeShowType('year')"
                    uiStopPropagation
                    [ngClass]="{'ui-active': showType==='year'}">{{ currentDate.getFullYear() }}</button>
            年
            <button type="button"
                    (click)="changeShowType('month')"
                    uiStopPropagation
                    [ngClass]="{'ui-active': showType==='month'}">{{ currentDate.getMonth() + 1 }}</button>
            月
          </td>
          <td>
            <button type="button" (click)="toNextMonth()">&rsaquo;</button>
            <button type="button"
                    [disabled]="showType === 'year' ? !canToNextYears : !canToNextYear"
                    (click)="updateYears(years[years.length-1] + 1)">&raquo;</button>
          </td>
        </tr>
        </tbody>
      </table>
      <div *ngIf="showType === 'year'" class="ui-date-years">
        <ul>
          <li *ngFor="let item of years">
            <button class="ui-date-key" type="button"
                    [disabled]="item.disable"
                    (click)="updatePickerByYear(item.year)"
                    [ngClass]="{'ui-active': currentDate.getFullYear() === item.year}">{{ item.year }}</button>
          </li>
        </ul>
      </div>
      <div *ngIf="showType === 'month'" class="ui-date-mouths">
        <ul>
          <li *ngFor="let item of months">
            <button class="ui-date-key" type="button"
                    (click)="updatePickerByMonth(item)"
                    [ngClass]="{disabled: item.disable, 'ui-active': currentDate.getMonth() === item.month}">{{ item.month + 1 }}月</button>
          </li>
        </ul>
      </div>
      <table *ngIf="showType === ''" class="ui-date-table">
        <tbody class="ui-date-body ui-date-panel-week">
        <tr>
          <td>日</td>
          <td>一</td>
          <td>二</td>
          <td>三</td>
          <td>四</td>
          <td>五</td>
          <td>六</td>
        </tr>
        </tbody>
        <tbody class="ui-date-body ui-date-panel-day">
        <tr *ngFor="let item of dayList">
          <td *ngFor="let day of item">
            <button type="button" class="ui-date-key" (click)="selected(day)"
                    [ngClass]="{
              'ui-no-current-month': day.date.getMonth() !== currentDate.getMonth(),
              'ui-current-day': day.date.getFullYear() === systemDate.getFullYear() && day.date.getMonth() === systemDate.getMonth() && day.day === systemDate.getMonth(),
              'ui-selected-day': day.date.getFullYear() === selectedDate.getFullYear() && day.date.getMonth() === selectedDate.getMonth() && day.day === selectedDate.getDate(),
              'ui-disabled': day.disable
              }">
              {{ day.day }}
            </button>
          </td>
        </tr>
        </tbody>
      </table>
      <div class="ui-date-btn-wrap" uiStopPropagation>
        <button type="button" class="ui-btn ui-btn-primary ui-btn-block ui-btn-sm"
                (click)="getResult()">确定
        </button>
      </div>
    </div>
  </ui-dropdown-menu>
</ui-dropdown>
